var open=document.querySelector(".map .btn"),popup=document.querySelector(".inquiry-form"),close=document.querySelector(".inquiry-form-close"),form=popup.querySelector("form"),nameField=popup.querySelector("[name=inquiry-name]"),email=popup.querySelector("[name=inquiry-email]"),message=popup.querySelector("[name=inquiry-text]"),storage=localStorage.getItem("name");open.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("inquiry-form-show"),storage?(nameField.value=storage,email.focus()):storage?((nameField.value=storage)&&(email.value=storage),message.focus()):nameField.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("inquiry-form-show")}),form.addEventListener("submit",function(e){nameField.value&&email.value&&message.value?(localStorage.setItem("name",nameField.value),localStorage.setItem("email",email.value),localStorage.setItem("inquiry-text",message.value)):(e.preventDefault(),popup.classList.add("inquiry-form-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("inquiry-form-show")&&(popup.classList.remove("inquiry-form-show"),popup.classList.remove("inquiry-form-error"))});var mapImage=document.querySelector(".map img"),mapLogo=document.querySelector(".map-logo");window.onload=function(){mapImage.classList.add("element-hidden"),mapLogo.classList.add("element-hidden")},ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.938631,30.323055],zoom:17},{searchControlProvider:"yandex#search"}),o=ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),a=new ymaps.Placemark(e.getCenter(),{hintContent:"Нердс",balloonContent:"Нердс"},{iconLayout:"default#image",iconImageHref:"img/map-marker.png",iconImageSize:[231,190],iconImageOffset:[-55,-210]}),t=new ymaps.Placemark([55.661574,37.573856],{hintContent:"Собственный значок метки с контентом",balloonContent:"А эта — новогодняя",iconContent:"12"},{iconLayout:"default#imageWithContent",iconImageHref:"images/ball.png",iconImageSize:[48,48],iconImageOffset:[-24,-24],iconContentOffset:[15,15],iconContentLayout:o});e.geoObjects.add(a).add(t)});